### Network. Работа с сетевыми устройствами. Получение информации о подключениях.


Главной задумкой при создании ОС Linux являлась как раз обеспечение удобной и функциональной работы с сетью. Linux поддерживает основыне сетеввые протоколы такие как TCP/IP, SMB, а также имеет в наличии инстументы мониторинга и фильтрации сетевого трафика. Данная ОС предоставляет возможность взаимодействия с почти любым сетевым оборудованием, главным условием являетсся наличие драйвера, встроенного в ядро или же компилируемого как загружаемы модуль.


#### IP ( Internet Protocol ) ####
IP-протокол сетевого уровня стека TCP\IP. С помощбю даноого протокола отдельные компьютерные сети быль объединены в глобальную сеть Интернет. Данный протокл не обеспечивает гарантированной доставки покета и допускает возможность его утери, повреждения или иных негативный изменений. Для безошибочной доставки пакетов используется протокол транспортного уровня - TCP.Существует две версии данного протокола IPv4 и IPv6;
- IPv4 данная версия используется в сети интернет , где каждому узу сети соответствует IP адресс длиной в 4 бита. Компьютеры принадлежащие одной подсети объединябтся общими начальными битами. Колличество этих бит называется маской подсети.(стало последствеим ухода от технологии дробления сети на классы A, B, C)
- IPv6 вводится в эсплуатацию с 96-го года.Данная версия помогает адрессовать значительно больщое количество узлов сети, нежели IPv4. Сети построенные на протоколе IPv6 более объёмные, данный протокол позволяет построить стройну иерархию адресации (что ускоряет маршрутизацию). Также огромным плюсом является наличие огромного пространства имён.

#### NetworkManager ####
 NetworkManager является основыным инструментом Linux позволяющим работать с сетью и сетевым оборудованием. </br>NetworkManager является инструментом предустанавлеваемым по умолчанию, вместе с Linux. Если же он, по каким-либо причинам, установлен не был его установка и обновление осуществляется с помощью команды:

`$ sudo apt install network-manager `

Для проверки установлен ли NetworkManager:
`$ sudo systemctl status network-manager`</br>
Запуск из терминала:
`$ sudo systemctl start network-manager`

Команда для инициализации интрфейса назначения IP адреса интерфейсу или для включения или отключения определённой интерфейса.
`$ ifconfig` или `$ ifconfig eth0 ` (Получение информации о конкертном интефейсе)
```
root@0d50c33be27e:~$ ifconfig

eth0 Link encap:Ethernet HWaddr 00:0C:29:28:FD:4C \\ Интерфейс eth0
inet addr:192.168.50.2 Bcast:192.168.50.255 Mask:255.255.255.0
inet6 addr: fe80::20c:29ff:fe28:fd4c/64 Scope:Link
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX packets:6093 errors:0 dropped:0 overruns:0 frame:0
TX packets:4824 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:6125302 (5.8 MiB) TX bytes:536966 (524.3 KiB)
Interrupt:18 Base address:0x2000

lo Link encap:Local Loopback  \\Локальный интерфейс для обращения системы к самой себе
inet addr:127.0.0.1 Mask:255.0.0.0
inet6 addr: ::1/128 Scope:Host
UP LOOPBACK RUNNING MTU:16436 Metric:1
RX packets:8 errors:0 dropped:0 overruns:0 frame:0
TX packets:8 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:0
RX bytes:480 (480.0 b) TX bytes:480 (480.0 b)
```
1.  eth0, eth1 - интерфейсы Ethernet-карт.
2.  tr0, tr1 - интерфейсы карт Token Ring.
3.  s10, s11 - SLIP интерфейсы.
4.  ppp0, ppp1 - PPP интерфейсы.
5.  plip0. plip1 - PLIP интерфейсы. PLIP передает IP датаграммы через параллельные порты.
6.  ax0, ax1 - AX.25 интерфейсы. AX.25 - основной протокол любительской радиосвязи.

`$ ifconfig eth0 192.168.50.5 netmask 255.255.255.0`-с помощью данной команды интерфесу eth0 назначается IP адрес и маска сети (до перезагрузки или отключения системы).</br>
`$ ifup eth0` / `$ ifdown eth0` - команды включения или отключения определённого интерфейса (в данном случае eth0). </br>
`$ netstat`-вывод сетевых подключений, таблиц маршрутизации и статитстики работы интерфейсов.</br>
`$ route`- вывод таблици маршрутизации IP. </br>

Команда `ip` является стандартным интерфейсом, но включает в себя огромный функционал. Синтаксис данной команды выглядит следующи образом `ip <OPTIONS> <OBJECT> <COMAND>`.
OBJECT-подкоманда, здесь допустимо использовать помимо определённых, слудеющие ключевые слова:

- `address` адресс протокола на устройстве.
- `tunnel` IP туннель.
- `route` запись таблицы маршрутизации.
- `rule` правило в БД политики маршрутизации.
- `vrf` управление устройствами маршрутизации (виртуальными) и перенаправление маршрутизации.

`$ ip addr show` - вывод информации обо всех установленных сетевых интерфейсах.</br>
`$ ip -s linl show eth0`- вывод статистики работы определённого сетевого интерфейса.</br>
`$ ip address add 192.168.1.254/24 dev enps03` - назначение IP адреса определённому интрефейсу. (при замене `add` на `del` происходит удаление данного адреса из интерфейса)</br>
`$ ip link set eth0 up ` - назначение статуса опредеделённому интерфейсу (`up` - активен, `down` - неактивен)</br>
`$ ip link set eth0 promisc on`- перевод сетевого интерфеса eth0 в режим приёма всех сетевых пакетов. </br>

#### MTR ####
MTR - данная программа предназначена для осуществления диагностики сетей и устранения неполадок. Осуществляет вывод большого колличества полезной информации на каждом шаге маршрутизации, к примеру время ответа системы и количесвто потерянных пакетов, что позволяет определить проблемы с сетевым соединением.






#### nmcli ####
nmcli - альтернатива графическому интерфейсу (GUI), позволяющий произвести настройку сети с помощью терминала. Для данных целей можно использовать ряд команд.

1. `device` - управление сетевыми интерфейсами;
2. `connection` - управление соединениями;
3. `networking` - управление сетью;
4. `general` -состояниесетевых протоколов;
5. `radio` - управление сетевыми протоколами;



Проверка состояния проводных соединений: `$ nmcli general status`</br>
```
root@0d50c33be27e:~$ nmcli general status
STATE       CONNECTIVITY        WIFI-HW       WIFI        WWAN-HW      WWAN
подключено  полностью           включен       включен     включен     включен
```
Проверка состояния проводных соединений: `$ nmcli general hostname`</br>
```
root@0d50c33be27e:~$ nmcli general hostname
root-0d50c
```
Проверка разрешений предоставляемы сетевым менеджером: `$ nmcli general permissions` </br>(урезанный пример)
```
root@0d50c33be27e:~$ nmcli general permissions
PERMISSIONS
org.freedesktop.NetworkManager.checkpoint-roolback                    auth
org.freedesktop.NetworkManager.enable-disable-network                  да
org.freedesktop.NetworkManager.enable-disable-wifi                     да
```
Проверка статуса радиопередачи Wi-Fi: `$ nmcli connection show radio wifi`
```
root@0d50c33be27e:~$ nmcli radio wifi
enable
```
Проверка всех соединений: `$ nmcli connection show`
```
root@0d50c33be27e:~$ nmcli connection show
NAME                    UUID                                  TYPE      DEVICE
Проводное соединение 1  c3531d9d-5378-3391-9f20-48bf14ddd113  ethernet  enp0s3
```
Получение полной информации об определённом подключении `$ nmcli connection show "Проводное соединение 1"`</br>
Полчение полной информации о дополнительных функциях nmcli `$ man nmcli`
